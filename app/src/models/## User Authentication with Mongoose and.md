 ## User Authentication with Mongoose and JSON Web Tokens (JWT)

This Node.js application demonstrates user authentication using Mongoose and JSON Web Tokens (JWT). It includes features such as password hashing, email validation, and token generation for secure user sessions.

### Prerequisites

- Node.js and npm installed
- MongoDB installed and running

### Installation

1. Clone the repository or download the code.
2. Run `npm install` to install the required dependencies.

### Database Setup

1. Create a MongoDB database named `user-auth`.
2. Import the `users.json` file into the `user-auth` database.

### Code Overview

#### 1. User Schema

The `userSchema` defines the structure of a user document in MongoDB. It includes fields for `password`, `tokens`, `name`, `age`, and `email`.

```javascript
const userSchema = new mongoose.Schema({
  password: {
    type: String,
    trim: true,
    minlength: 7,
    validate(val) {
      if (val.length < 6) {
        throw new Error('Password should be at least 6 characters');
      } else if (val.toLowerCase().includes("password")) {
        throw new Error('The word "password" is not allowed in the password field');
      }
    },
  },
  tokens: [
    {
      token: {
        type: String,
        required: true,
      },
    },
  ],
  name: { type: String },
  age: {
    type: Number,
    default: 0,
    validate(val) {
      if (val < 0) throw new Error("Age must be positive number");
    },
  },
  email: {
    type: String,
    // required: true,
    unique: true,
    trim: true,
    lowercase: true,
    validate(val) {
      if (!validator.isEmail(val)) {
        throw new Error("Invalid Email Address");
      }
    },
  },
});
```

#### 2. Password Hashing

Before saving a user document, the `pre("save")` middleware hashes the user's password using bcrypt. This ensures that passwords are stored securely in the database.

```javascript
userSchema

Generated by [BlackboxAI](https://www.blackbox.ai)